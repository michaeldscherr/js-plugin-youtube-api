{"version":3,"file":null,"sources":["../src/youtube-api.js"],"sourcesContent":["if (typeof Object.assign !== 'function') {\n    Object.assign = function(target) {\n        if (target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n        target = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== null) {\n                for (var key in source) {\n                    if (Object.prototype.hasOwnProperty.call(source, key)) {\n                        target[key] = source[key];\n                    }\n                }\n            }\n        }\n        return target;\n    };\n}\n\nwindow.youtubeClient = (function(window, document) {\n\n    /*\n        * since `onYouTubeIframeAPIReady` is only called once\n        * keep track of the elements before the script is loaded\n    */\n    let initialElemsBeforeInit = [];\n\n    // defaults for plugin\n    const defaults = {\n        onAPIReady: () => {},\n        onStateChange: () => {},\n        playerVars: {\n            autoplay: 0,\n            controls: 0,\n            loop: 1,\n            modestbranding: 1,\n            showinfo: 0,\n            wmode: 'opaque'\n        }\n    };\n\n    /**\n        * youtube api that gets injected\n        * into the youtube client instance\n    */\n    const youtubeAPI = function(reference, options) {\n\n        const elem = reference.elem;\n        const videoid = reference.videoid;\n        let player = null;\n\n        // return the player\n        let getPlayer = () => player;\n\n        /**\n            * build the youtube player\n            * set variables\n            * bind the events\n        */\n        let build = function () {\n            player = new window.YT.Player(elem, {\n                videoId: videoid,\n                playerVars: options.playerVars,\n                events: {\n                    onReady: options.onAPIReady,\n                    onStateChange: (state) => options.onStateChange(state)\n                }\n            });\n        };\n\n        return {\n            build,\n            getPlayer\n        };\n    };\n\n    // set to false initially\n    let scriptLoaded = false;\n\n    /**\n        this function loads the YouTube API script\n        the script generated will trigger the\n        `window.onYouTubeIframeAPIReady` function\n    */\n    function loadAPIScript() {\n        if (scriptLoaded === true) {\n            return;\n        }\n        const firstScriptTag = document.getElementsByTagName('script')[0];\n        let tag = document.createElement('script');\n        tag.src = 'https://www.youtube.com/iframe_api';\n        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n    }\n\n    const YoutubeClient = function(elem, options) {\n        this.options = Object.assign({}, defaults, options);\n        this.elem = elem;\n        this.videoid = this.elem.getAttribute('data-yt-videoid');\n        this.api = new youtubeAPI(this, this.options);\n    };\n\n    /**\n        destroy the current\n        player instance\n    */\n    YoutubeClient.prototype.destroy = function() {\n        const player = this.api.getPlayer();\n        player.destroy();\n    };\n\n    /**\n        * on init, build the player\n        * from the api\n    */\n    YoutubeClient.prototype.init = function() {\n        this.api.build();\n    };\n\n    /**\n        * simple factory function to return\n        * a new `YoutubeClient` instance to\n        * each element passed in\n    */\n    const factory = function(elems, options = {}) {\n        if (!elems.length) {\n            elems = [...elems];\n        }\n        const cb = (targets) => {\n            targets.forEach((target) => {\n                if (typeof options === 'string') {\n                    if (target.YouTubeClient && typeof target.YouTubeClient[options] !== 'function') {\n                        throw new Error(`\"${options}\" method is not defined on ${target}`);\n                    }\n                    return target.YouTubeClient[options]();\n                }\n                if (target.youtubeClientInitialized === true) {\n                    return true;\n                }\n                const youtubeClient = new YoutubeClient(target, options);\n                youtubeClient.init();\n                target.youtubeClientInitialized = true;\n                target.YouTubeClient = youtubeClient;\n                return target.YouTubeClient;\n            });\n        };\n        if (scriptLoaded) {\n            cb(elems);\n            return;\n        }\n        /*\n            * push initial elements, since youtube script\n            * has not loaded yet\n        */\n        initialElemsBeforeInit.push(...elems);\n        window.onYouTubeIframeAPIReady = () => {\n            scriptLoaded = true;\n            cb(initialElemsBeforeInit);\n        };\n        loadAPIScript();\n    };\n\n    // return just the factory, everything else is private\n    return factory;\n\n})(window, document);\n\n(function(window, document) {\n\n    // check for document ready state\n    document.onreadystatechange = () => {\n        if (document.readyState === 'complete') {\n\n            // select elements, initialize plugin\n            const elems = document.querySelectorAll('[data-yt-client=\"true\"]');\n            window.youtubeClient(elems);\n\n        }\n    };\n\n})(window, document);\n"],"names":["arguments","let","const"],"mappings":"AAAA,IAAI,OAAO,MAAM,CAAC,MAAM,KAAK,UAAU,EAAE;IACrC,MAAM,CAAC,MAAM,GAAG,SAAS,MAAM,EAAE;;;QAC7B,IAAI,MAAM,KAAK,IAAI,EAAE;YACjB,MAAM,IAAI,SAAS,CAAC,4CAA4C,CAAC,CAAC;SACrE;QACD,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QACxB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACnD,IAAI,MAAM,GAAGA,WAAS,CAAC,KAAK,CAAC,CAAC;YAC9B,IAAI,MAAM,KAAK,IAAI,EAAE;gBACjB,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE;oBACpB,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;wBACnD,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;qBAC7B;iBACJ;aACJ;SACJ;QACD,OAAO,MAAM,CAAC;KACjB,CAAC;CACL;;AAED,MAAM,CAAC,aAAa,GAAG,CAAC,SAAS,MAAM,EAAE,QAAQ,EAAE;;;;;;IAM/CC,IAAI,sBAAsB,GAAG,EAAE,CAAC;;;IAGhCC,IAAM,QAAQ,GAAG;QACb,UAAU,EAAE,YAAG,EAAK;QACpB,aAAa,EAAE,YAAG,EAAK;QACvB,UAAU,EAAE;YACR,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,CAAC;YACX,IAAI,EAAE,CAAC;YACP,cAAc,EAAE,CAAC;YACjB,QAAQ,EAAE,CAAC;YACX,KAAK,EAAE,QAAQ;SAClB;KACJ,CAAC;;;;;;IAMFA,IAAM,UAAU,GAAG,SAAS,SAAS,EAAE,OAAO,EAAE;;QAE5CA,IAAM,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC;QAC5BA,IAAM,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC;QAClCD,IAAI,MAAM,GAAG,IAAI,CAAC;;;QAGlBA,IAAI,SAAS,GAAG,YAAG,SAAG,MAAM,GAAA,CAAC;;;;;;;QAO7BA,IAAI,KAAK,GAAG,YAAY;YACpB,MAAM,GAAG,IAAI,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE;gBAChC,OAAO,EAAE,OAAO;gBAChB,UAAU,EAAE,OAAO,CAAC,UAAU;gBAC9B,MAAM,EAAE;oBACJ,OAAO,EAAE,OAAO,CAAC,UAAU;oBAC3B,aAAa,EAAE,UAAC,KAAK,EAAE,SAAG,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,GAAA;iBACzD;aACJ,CAAC,CAAC;SACN,CAAC;;QAEF,OAAO;YACH,OAAA,KAAK;YACL,WAAA,SAAS;SACZ,CAAC;KACL,CAAC;;;IAGFA,IAAI,YAAY,GAAG,KAAK,CAAC;;;;;;;IAOzB,SAAS,aAAa,GAAG;QACrB,IAAI,YAAY,KAAK,IAAI,EAAE;YACvB,OAAO;SACV;QACDC,IAAM,cAAc,GAAG,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QAClED,IAAI,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC3C,GAAG,CAAC,GAAG,GAAG,oCAAoC,CAAC;QAC/C,cAAc,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;KAC/D;;IAEDC,IAAM,aAAa,GAAG,SAAS,IAAI,EAAE,OAAO,EAAE;QAC1C,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;QACpD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;QACzD,IAAI,CAAC,GAAG,GAAG,IAAI,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;KACjD,CAAC;;;;;;IAMF,aAAa,CAAC,SAAS,CAAC,OAAO,GAAG,WAAW;QACzCA,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;QACpC,MAAM,CAAC,OAAO,EAAE,CAAC;KACpB,CAAC;;;;;;IAMF,aAAa,CAAC,SAAS,CAAC,IAAI,GAAG,WAAW;QACtC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;KACpB,CAAC;;;;;;;IAOFA,IAAM,OAAO,GAAG,SAAS,KAAK,EAAE,OAAY,EAAE;yCAAP,GAAG,EAAE;;QACxC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YACf,KAAK,GAAG,WAAI,KAAK,EAAC,CAAC;SACtB;QACDA,IAAM,EAAE,GAAG,UAAC,OAAO,EAAE;YACjB,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE;gBACrB,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;oBAC7B,IAAI,MAAM,CAAC,aAAa,IAAI,OAAO,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,UAAU,EAAE;wBAC7E,MAAM,IAAI,KAAK,CAAC,CAAA,IAAE,GAAE,OAAO,iCAA4B,GAAE,MAAM,CAAE,CAAC,CAAC;qBACtE;oBACD,OAAO,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC;iBAC1C;gBACD,IAAI,MAAM,CAAC,wBAAwB,KAAK,IAAI,EAAE;oBAC1C,OAAO,IAAI,CAAC;iBACf;gBACDA,IAAM,aAAa,GAAG,IAAI,aAAa,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;gBACzD,aAAa,CAAC,IAAI,EAAE,CAAC;gBACrB,MAAM,CAAC,wBAAwB,GAAG,IAAI,CAAC;gBACvC,MAAM,CAAC,aAAa,GAAG,aAAa,CAAC;gBACrC,OAAO,MAAM,CAAC,aAAa,CAAC;aAC/B,CAAC,CAAC;SACN,CAAC;QACF,IAAI,YAAY,EAAE;YACd,EAAE,CAAC,KAAK,CAAC,CAAC;YACV,OAAO;SACV;;;;;QAKD,sBAAsB,CAAC,IAAI,MAAA,CAAC,wBAAA,KAAQ,CAAC,CAAC;QACtC,MAAM,CAAC,uBAAuB,GAAG,YAAG;YAChC,YAAY,GAAG,IAAI,CAAC;YACpB,EAAE,CAAC,sBAAsB,CAAC,CAAC;SAC9B,CAAC;QACF,aAAa,EAAE,CAAC;KACnB,CAAC;;;IAGF,OAAO,OAAO,CAAC;;CAElB,CAAC,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;;AAErB,CAAC,SAAS,MAAM,EAAE,QAAQ,EAAE;;;IAGxB,QAAQ,CAAC,kBAAkB,GAAG,YAAG;QAC7B,IAAI,QAAQ,CAAC,UAAU,KAAK,UAAU,EAAE;;;YAGpCA,IAAM,KAAK,GAAG,QAAQ,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,CAAC;YACnE,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;;SAE/B;KACJ,CAAC;;CAEL,CAAC,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC"}